!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}({0:function(e,t,n){"use strict";var a=function(){},s={0:"A new process has been initiated.",1:"Operation successful!",2:"This is a warning message.",3:"Oops! Something went wrong. Please try again."},o={0:"info",1:"success",2:"warning",3:"error"};a.TYPES={INFO:0,SUCCESS:1,WARNING:2,ERROR:3},a.show=function(e,t){var n='<div class="toast custom rounded-5 '+o[e]+'-toast" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-body d-flex align-items-center gap-5 justify-content-between"><p class="tost-msg mb-0 text-md black d-flex align-items-center gap-3">'+(t||s[e])+'</p><div class="separator"></div><button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div></div>',a=$(".toast-messaging");a.html(n);var i=a.children().last();new bootstrap.Toast(i[0]).show()},e.exports=a},1:function(e,t,n){"use strict";var a=n(0),s=function(){var e=!1,t=$("#execution_history");if(t.length>0)var n,s=t.data("execution-list-data"),o=s.exportDetailsURL,i=s.showDownloadFile,r=s.downloadFileType,d=s.jobIds,l=s.impexPath,c=setInterval((function(){e||((n=t.find('[data-job-status="PENDING"], [data-job-status="RUNNING"]')).length>0?(e=!0,$.ajax(o,{data:{executionId:n.data("execution-id"),jobIds:d,serviceType:n.data("service-type")?n.data("service-type"):s.serviceType,downloadExportFile:i,downloadFileType:r,impexPath:l},dataType:"json",method:"GET",success:function(e){if(e.success){var s=$(e.renderedTemplate);-1===["PENDING","RUNNING"].indexOf(s.data("job-status"))&&(s.addClass("animate-slide-in-down"),clearInterval(c)),(n=t.find('[data-job-status="PENDING"], [data-job-status="RUNNING"]')).replaceWith(s),setTimeout((function(){t.find("tr").removeClass("animate-slide-in-down")}),1e3)}else e.serverErrors&&e.serverErrors.length>0&&a.show(a.TYPES.ERROR,e.serverErrors[0])},complete:function(){e=!1}})):clearInterval(c))}),3e4)};e.exports={checkProcessStatus:s,handleProcessLink:function(){$(document).on("click",".execution-modal-link",(function(e){e.preventDefault(),$(this).closest("tr").addClass("focused");var t=$(this).closest("tr"),n=$(t).data("job-status"),a=$("#executionModal");if("PENDING"!==n&&"RUNNING"!==n){a.modal("show"),t.closest("tr").addClass("focused");var s=t.find(".execution-modal-link").html(),o=t.closest("tr").data("execution-obj");a.find(".modal-body").spinner().start();var i=o.configurationUUID?o.configurationUUID:"";if(i){var r=$("#execution_history").data("job-logs-url"),d={JobConfigurationUUID:i};$.ajax({url:r,data:d,type:"get",success:function(e){var t,n=$(".log-messages"),i=a.find(".download-section"),r=$(e).find("textarea.inputfield_en").html();switch(""!==$.trim(r)&&n.empty().html(r).removeClass("d-none"),o.executionStatus){case"finished":"OK"===o.status?(t="Success",i.show(),a.find(".download-section a").attr("href",o.exportURL)):(t="Error",i.hide());break;case"aborted":t="Error",i.hide();break;default:t="In-progress",i.hide()}o.processType&&"Import"===o.processType?a.find(".download-section").addClass("d-none"):o.processType&&"Export"===o.processType&&a.find(".download-section").removeClass("d-none");var d='<span class="badge '+t.toLowerCase()+'-badge">'+t+"</span>";a.find(".file-name").empty().html(s.replace(/&lt;/g,"<br/>&lt;")),a.find(".status").empty().html(d),a.find(".time-section .time-message").empty().html(o.timeStatusMessage),a.find(".download-log").attr("href",o.logFileURL),a.find(".modal-body").spinner().stop()}}),a.on("hidden.bs.modal",(function(){$(".table-link").removeClass("focused")}))}}}))},handleCopyLink:function(){$("body").on("click",".log-file-section .copy",(function(e){e.preventDefault();const t=new bootstrap.Tooltip($(this),{trigger:"manual"}),n=$(".log-file-section .log-messages");if(n.length){const e=$(n).text();""!==$.trim(e)&&(navigator.clipboard.writeText(e),t.show(),setTimeout((function(){t.hide()}),1e3))}}))},refreshExecutionList:function(){$(document).on("click",".refresh-execution-list",(function(e){e.preventDefault();var t=$("#execution_history"),n=t.data("execution-list-data"),o=n.exportDetailsURL,i=n.showDownloadFile,r=n.downloadFileType,d=n.jobIds,l=n.impexPath,c=n.maxProcessNumber;t.spinner().start(),$.ajax(o,{data:{jobIds:d,serviceType:n.serviceType,downloadExportFile:i,downloadFileType:r,impexPath:l,maxProcessNumber:c},dataType:"json",method:"get",success:function(e){e.success?($(".execution-list").html(e.renderedTemplate),$(".execution-list").find("tr[data-job-status=RUNNING], tr[data-job-status=PENDING]")&&s(),t.spinner().stop()):e.serverErrors&&e.serverErrors.length>0&&(a.show(a.TYPES.ERROR,e.serverErrors[0]),t.spinner().stop())},complete:function(){$(".refresh-execution-list").blur()}}),$(".refresh-execution-list").blur()}))},validateNoRunningProcess:function(){var e=!0,t=$("#execution_history");if(t.find('[data-job-status="PENDING"], [data-job-status="RUNNING"]').length>0){var n=t.data("running-process-error");a.show(a.TYPES.INFO,n),e=!1}return e}}},15:function(e,t,n){"use strict";var a=jQuery,s=n(1),o=n(0);function i(e){a("form.execute-import-export").trigger("reset");var t=e.data("define");e.find(".btn-text").text(t),e.find("input[name=dataMappingName]").val("");var n=a(".csv-file-input");n.val(""),a(".file-name").text(n.data("csv-placeholder")),e.find(".submit-import-button, .export-button").addClass("disabled"),e.find(".select-price-book-id").addClass("d-none"),e.find(".select-inventory-list-ids").addClass("d-none"),e.find(".data-mapping-button").addClass("disabled")}a(document).ready((function(){a(document).on("change",".csv-file-input",(function(){var e=a(this).val().split("\\").pop(),t=a(".import-export-wrapper").find(".collapse.show"),n=t.find(".btn-primary"),s=t.find("input[name=dataMappingName]").val(),o=a(".data-selection .select-ids").not(".d-none").find(".select-ids-list").val();""!==e?(a(".file-name").text(e),s&&(null!==o&&""!==o?n.removeClass("disabled"):n.addClass("disabled"))):(a(".file-name").text("Upload CSV File ..."),n.addClass("disabled"))})),a(document).on("change",".select-ids-list",(function(){var e=a(".import-export-wrapper").find(".collapse.show"),t=e.find(".data-mapping-button .btn-text").text(),n=e.find(".btn-primary");"Import"===e.find("[name=processType]").val()?""!==a(".csv-file-input").val()&&"Define"!==t?n.removeClass("disabled"):n.addClass("disabled"):"Define"!==t?n.removeClass("disabled"):n.addClass("disabled")})),a("body").on("click",".remove-button",(function(e){e.preventDefault(),a(this).closest(".group").remove();var t=a(".new-mapping-record .object-attr option:not(:disabled)").length;a(".mapping-table-content .object-attr").length<=t&&a(".mapping-table .add-button").removeClass("disabled")})),a("body").on("click",".import-export-buttons .selector-button",(function(){var e=a(".import-export-wrapper").find(".csv-section.collapsing");a(".selector-button").not(this).removeClass("selected"),a(this).toggleClass("selected"),e.each((function(e,t){i(a(t))}))})),a("body").on("change",".data-type-select",(function(){var e=a(".import-export-wrapper").find(".collapse.show");"priceBook"===a(this).val()?(e.find(".select-price-book-id").removeClass("d-none"),e.find(".select-inventory-list-ids").addClass("d-none")):"inventory"===a(this).val()&&(e.find(".select-inventory-list-ids").removeClass("d-none"),e.find(".select-price-book-id").addClass("d-none"));var t=a(this).parents(".data-selection").find(".select-ids:not(.d-none)").find(".select-ids-list"),n=t.val();null!==n&&""!==n||t.parents(".collapse").find(".data-mapping-button").addClass("disabled"),a(this).parents(".collapse").find(".data-mapping-button").find(".btn-text").text("Define"),e.find("input[name=dataMappingName]").empty(),a(this).parents(".collapse").find(".data-mapping-button").removeClass("disabled"),e.find(".btn-primary").addClass("disabled")})),a("body").on("click",".apply-configuration",(function(){var e=a("#dataMapping"),t=e.find(".saved-mapping-config").find('input[name="data-mapping"]:checked'),n=a(".data-selection .select-ids").not(".d-none").find(".select-ids-list").val();if(t.length){var s=t.val();a(".submit-import-button").attr("data-selected-data-mapping",s);var i=a(".import-export-wrapper").find(".collapse.show"),r=i.find(".btn-primary");i.find(".btn-text").text(s),i.find("input[name=dataMappingName]").val(s),e.modal("hide"),"Import"===i.find("[name=processType]").val()?""===a(".csv-file-input").val()||null===n||""===n?r.addClass("disabled"):r.removeClass("disabled"):"Export"===i.find("[name=processType]").val()&&(null===n||""===n?r.addClass("disabled"):r.removeClass("disabled"))}else o.show(o.TYPES.ERROR,a(".apply-configuration").attr("data-missing-data"))})),a(document).on("submit","form.execute-import-export",(function(e){e.preventDefault();var t=a(this),n=new FormData(t[0]),r=t.attr("action");s.validateNoRunningProcess()&&(i(a(".import-export-wrapper").find(".collapse.show")),a("body").spinner().start(),a.ajax({url:r,data:n,type:"post",contentType:!1,processData:!1,success:function(e){a("#execution_history").spinner().stop();var t=a("#execution_history").find(".table"),n=e.renderedTemplate;e.success?(t.find("tbody tr").length>=5&&t.find("tbody tr:last").remove(),t.find("tbody").prepend(n)):o.show(o.TYPES.ERROR,e.errorMessage),s.checkProcessStatus()},complete:function(){a("body").spinner().stop()}}))}))}))}});