!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=15)}({0:function(e,t,a){"use strict";var n=function(){},o={0:"A new process has been initiated.",1:"Operation successful!",2:"This is a warning message.",3:"Oops! Something went wrong. Please try again."},s={0:"info",1:"success",2:"warning",3:"error"};n.TYPES={INFO:0,SUCCESS:1,WARNING:2,ERROR:3},n.show=function(e,t){var a='<div class="toast custom rounded-5 '+s[e]+'-toast" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-body d-flex align-items-center gap-5 justify-content-between"><p class="tost-msg mb-0 text-md black d-flex align-items-center gap-3">'+(t||o[e])+'</p><div class="separator"></div><button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div></div>',n=$(".toast-messaging");n.html(a);var i=n.children().last();new bootstrap.Toast(i[0]).show()},e.exports=n},1:function(e,t,a){"use strict";var n=a(0);e.exports={checkProcessStatus:function(){var e=!1,t=$("#execution_history"),a=t.data("export-details-url"),n=t.data("show-download-file"),o=t.data("download-file-type"),s=t.data("impex-path"),i=t.find('[data-job-status="PENDING"], [data-job-status="RUNNING"]'),d=setInterval((function(){e||(i.length>0?(e=!0,$.ajax(a,{data:{executionId:i.data("execution-id"),jobIds:i.data("execution-obj").jobIds,serviceType:i.data("service-type"),downloadExportFile:n,downloadFileType:o,impexPath:s},dataType:"json",method:"GET",success:function(e){if(e.success){var a=$(e.renderedTemplate);-1===["PENDING","RUNNING"].indexOf(a.data("job-status"))&&(a.addClass("animate-slide-in-down"),clearInterval(d)),(i=t.find('[data-job-status="PENDING"], [data-job-status="RUNNING"]')).replaceWith(a),setTimeout((function(){t.find("tr").removeClass("animate-slide-in-down")}),1e3)}},complete:function(){e=!1}})):clearInterval(d))}),3e4)},handleProcessLink:function(){$(document).on("click",".execution-modal-link",(function(e){e.preventDefault(),$(this).closest("tr").addClass("focused");var t=$(this).closest("tr"),a=$(t).data("job-status"),n=$("#executionModal");if("PENDING"!==a&&"RUNNING"!==a){n.modal("show"),t.closest("tr").addClass("focused");var o=t.find(".execution-modal-link").html(),s=t.closest("tr").data("execution-obj");n.find(".modal-body").spinner().start();var i=s.configurationUUID?s.configurationUUID:"";if(i){var d=$("#execution_history").data("job-logs-url"),r={JobConfigurationUUID:i};$.ajax({url:d,data:r,type:"get",success:function(e){var t,a=$(".log-messages"),i=n.find(".download-section"),d=$(e).find("textarea.inputfield_en").html();switch(""!==$.trim(d)&&a.empty().html(d).removeClass("d-none"),s.status){case"OK":t="Success",i.show(),n.find(".download-section a").attr("href",s.exportURL);break;case"PENDING":t="In-progress",i.hide();break;default:t="Error",i.hide()}s.processType&&"Import"===s.processType?n.find(".download-section").addClass("d-none"):s.processType&&"Export"===s.processType&&n.find(".download-section").removeClass("d-none");var r='<span class="badge '+t.toLowerCase()+'-badge">'+t+"</span>";n.find(".file-name").empty().html(o.replace(/&lt;/g,"<br/>&lt;")),n.find(".status").empty().html(r),n.find(".time-section .time-message").empty().html(s.timeStatusMessage),n.find(".download-log").attr("href",s.logFileURL),n.find(".modal-title").text(s.modalTitle),n.find(".modal-body").spinner().stop()}}),n.on("hidden.bs.modal",(function(){$(".table-link").removeClass("focused")}))}}}))},handleCopyLink:function(){$("body").on("click",".log-file-section .copy",(function(e){e.preventDefault();const t=new bootstrap.Tooltip($(this),{trigger:"manual"}),a=$(".log-file-section .log-messages");if(a.length){const e=$(a).text();""!==$.trim(e)&&(navigator.clipboard.writeText(e),t.show(),setTimeout((function(){t.hide()}),1e3))}}))},refreshExecutionList:function(){$(document).on("click",".refresh-execution-list",(function(e){e.preventDefault();var t=$("#execution_history"),a=t.find('[data-job-status="PENDING"], [data-job-status="RUNNING"]');if(a.length>0){var n=t.data("export-details-url"),o=t.data("show-download-file"),s=t.data("download-file-type"),i=t.data("impex-path");t.spinner().start(),$.ajax(n,{data:{executionId:a.data("execution-id"),jobIds:a.data("execution-obj").jobIds,serviceType:a.data("service-type"),downloadExportFile:o,downloadFileType:s,impexPath:i},dataType:"json",method:"get",success:function(e){if(e.success){var n=$(e.renderedTemplate);-1===["PENDING","RUNNING"].indexOf(n.data("job-status"))&&n.addClass("animate-slide-in-down"),a.replaceWith(n),setTimeout((function(){t.find("tr").removeClass("animate-slide-in-down")}),1e3),t.spinner().stop()}},complete:function(){$(".refresh-execution-list").blur()}})}$(".refresh-execution-list").blur()}))},validateNoRunningProcess:function(){var e=!0,t=$("#execution_history");if(t.find('[data-job-status="PENDING"], [data-job-status="RUNNING"]').length>0){var a=t.data("running-process-error");n.show(n.TYPES.INFO,a),e=!1}return e}}},15:function(e,t,a){"use strict";var n=jQuery,o=a(1),s=a(0);function i(e){n("form.execute-import-export").trigger("reset");var t=e.data("define");e.find(".btn-text").text(t),e.find("input[name=dataMappingName]").val("");var a=n(".csv-file-input");a.val(""),n(".file-name").text(a.data("csv-placeholder")),e.find(".submit-import-button, .export-button").addClass("disabled"),e.find(".select-price-book-id").addClass("d-none"),e.find(".select-inventory-list-ids").addClass("d-none"),e.find(".data-mapping-button").addClass("disabled")}n(document).ready((function(){n(document).on("change",".csv-file-input",(function(){var e=n(this).val().split("\\").pop(),t=n(".import-export-wrapper").find(".collapse.show"),a=t.find(".btn-primary"),o=t.find("input[name=dataMappingName]").val(),s=n(".data-selection .select-ids").not(".d-none").find(".select-ids-list").val();""!==e?(n(".file-name").text(e),o&&(null!==s&&""!==s?a.removeClass("disabled"):a.addClass("disabled"))):(n(".file-name").text("Upload CSV File ..."),a.addClass("disabled"))})),n(document).on("change",".select-ids-list",(function(){var e=n(".import-export-wrapper").find(".collapse.show"),t=e.find(".data-mapping-button .btn-text").text(),a=e.find(".btn-primary");"Import"===e.find("[name=processType]").val()?""!==n(".csv-file-input").val()&&"Define"!==t?a.removeClass("disabled"):a.addClass("disabled"):"Define"!==t?a.removeClass("disabled"):a.addClass("disabled")})),n("body").on("click",".remove-button",(function(e){e.preventDefault(),n(this).closest(".group").remove();var t=n(".new-mapping-record .object-attr option:not(:disabled)").length;n(".mapping-table-content .object-attr").length<=t&&n(".mapping-table .add-button").removeClass("disabled")})),n("body").on("click",".import-export-buttons .selector-button",(function(){var e=n(".import-export-wrapper").find(".csv-section.collapsing");n(".selector-button").not(this).removeClass("selected"),n(this).toggleClass("selected"),e.each((function(e,t){i(n(t))}))})),n("body").on("change",".data-type-select",(function(){var e=n(".import-export-wrapper").find(".collapse.show");"priceBook"===n(this).val()?(e.find(".select-price-book-id").removeClass("d-none"),e.find(".select-inventory-list-ids").addClass("d-none")):"inventory"===n(this).val()&&(e.find(".select-inventory-list-ids").removeClass("d-none"),e.find(".select-price-book-id").addClass("d-none"));var t=n(this).parents(".data-selection").find(".select-ids:not(.d-none)").find(".select-ids-list"),a=t.val();null!==a&&""!==a||t.parents(".collapse").find(".data-mapping-button").addClass("disabled"),n(this).parents(".collapse").find(".data-mapping-button").find(".btn-text").text("Define"),e.find("input[name=dataMappingName]").empty(),n(this).parents(".collapse").find(".data-mapping-button").removeClass("disabled"),e.find(".btn-primary").addClass("disabled")})),n("body").on("click",".apply-configuration",(function(){var e=n("#dataMapping"),t=e.find(".saved-mapping-config").find('input[name="data-mapping"]:checked'),a=n(".data-selection .select-ids").not(".d-none").find(".select-ids-list").val();if(t.length){var o=t.val();n(".submit-import-button").attr("data-selected-data-mapping",o);var i=n(".import-export-wrapper").find(".collapse.show"),d=i.find(".btn-primary");i.find(".btn-text").text(o),i.find("input[name=dataMappingName]").val(o),e.modal("hide"),"Import"===i.find("[name=processType]").val()?""===n(".csv-file-input").val()||null===a||""===a?d.addClass("disabled"):d.removeClass("disabled"):"Export"===i.find("[name=processType]").val()&&(null===a||""===a?d.addClass("disabled"):d.removeClass("disabled"))}else s.show(s.TYPES.ERROR,n(".apply-configuration").attr("data-missing-data"))})),n(document).on("submit","form.execute-import-export",(function(e){e.preventDefault();var t=n(this),a=new FormData(t[0]),d=t.attr("action");o.validateNoRunningProcess()&&(i(n(".import-export-wrapper").find(".collapse.show")),n("body").spinner().start(),n.ajax({url:d,data:a,type:"post",contentType:!1,processData:!1,success:function(e){n("#execution_history").spinner().stop();var t=n("#execution_history").find(".table"),a=e.renderedTemplate;e.success?(t.find("tbody tr").length>=5&&t.find("tbody tr:last").remove(),t.find("tbody").prepend(a)):s.show(s.TYPES.ERROR,e.errorMessage),o.checkProcessStatus()},complete:function(){n("body").spinner().stop()}}))}))}))}});